# 1. Завантажте та встановіть node.js

LTS версія https://nodejs.org/

> Після встановлення програми **необхідно перезавантажити комп'ютер!**

# 2. Перевірте коректність встановлення node.js та npm

Для перевірки правильності встановлення
**node.js**
у командному рядку виконайте:

```
node -v
```

Для перевірки правильності встановлення
**npm**
у командному рядку виконайте:

```
npm -v
```

<!-- два пробіли + enter = розрив рядка -->

> Якщо в результаті ви побачите версії **_node.js_** та **_npm_** - встановлення успішне.
> В іншому випадку - шукайте помилку, продовжувати немає сенсу.

# 3. Встановіть gulp-cli глобально

## 3.1. Відкрийте консоль у папці проекту

**ДУЖЕ ВАЖЛИВО!**  
У шляхах до проекту, як і всередині проекту, (ніде) не повинно бути кирилиці, пробілів та спецсимволів!  
Це призведе до 100% ймовірності появи помилок у роботі скриптів.

**ВАЖЛИВО! Для WINDOWS!**  
Не використовуйте консоль **PowerShell**, замініть її вбудованою **Cmd**.  
[Інструкція для заміни терміналу за замовчуванням у VSCode (для Windows)](./CMD.md).

> Замість **cmd** можна скористатися **Cmder** або **GitBash**. [Інструкція з інтеграції **Cmder** та **GitBash** у VSCode](https://dev.to/andrewriveradev/how-to-setup-cmder-in-vscode-in-2021-3nkc) (якщо ви не розумієте, навіщо це потрібно, то пропустіть цю частину.)

**ВАЖЛИВО!**

Для коректної роботи gulp у терміналі повинен бути відкритий кореневий каталог вашого проекту.

## 3.2. Виконайте встановлення **gulp-cli** командою:

```
npm install gulp-cli -g
```

> Встановлення виконується один раз, глобально (файли розміщуються в каталозі користувача на системному диску, а не в папці проекту). Дану дію не потрібно повторювати при створенні нового проекту.

**ВАЖЛИВО! Для MAC!**  
Для **mac** потрібно прописувати команду через **sudo**.

![gulp-cli install via sudo in mac](assets/images/vscode-cmd/mac_sudo.png)

# 4. Встановіть плагіни для роботи gulp

## 4.1. Розмістіть у корені вашого проекту файли **gulpfile.js**, **package.json**, **package-lock.json** та **.csscomb.json**

**ВАЖЛИВО**

Скопіюйте (із заміною, якщо потрібно) файли **gulpfile.js**, **package.json**, **package-lock.json**, **.csscomb.json** з даного репозиторію у ваш проект.

> Якщо в папці проекту вже були сторонні **gulpfile.js**, **package.json**, **package-lock.json**, **.csscomb.json** і ви не розумієте, що написано в цих файлах, не знаєте хто і навіщо їх там розмістив, ви повинні їх замінити завантаженими з даного репозиторію **gulpfile.js**, **package.json**, **package-lock.json**, **.csscomb.json**.  
> Інакше - спостерігайте множину помилок при спробах запуску завдань.

## 4.2. Розгорніть плагіни з **package.json** у папці проекту

Переконайтеся, що шлях у консолі відповідає шляху до вашого проекту, потім виконайте в консолі команду:

```
npm install
```

> Встановлення плагінів може зайняти від кількох секунд до десятків хвилин.  
> В результаті, в каталозі проекту повинна з'явитися папка **_node-modules_** з усіма необхідними для роботи **gulp** залежностями

## 4.3. Дії п.4 потрібно повторювати для кожного нового проекту!

Або дотримуйтеся інструкції п.4.4.

## 4.4. Одне встановлення плагінів для всіх проектів

Щоб зробити одне встановлення для всіх проектів, потрібно розмістити **package.json** у батьківській папці для всіх ваших проектів і виконати в ній встановлення.

При цьому, **gulpfile.js** необхідно розміщувати в корені кожного нового проекту.

> Такий підхід дозволить будь-якому **gulpfile.js** звертатися до плагінів, розміщених у спільному (батьківському) каталозі, і від вас не потребуватиметься встановлення плагінів зі списку **package.json** для кожного проекту окремо.

# 5. Перевірити правильність встановлення gulp-cli та gulp

```
gulp -v
```

> Якщо в результаті ви побачите версії  
> **CLI version x.x.x**  
> **Local version 4.x.x** - встановлення успішне.  
> В іншому випадку - шукайте помилку, продовжувати немає сенсу.

# 6. Запуск завдання відстеження файлів проекту

Для запуску завдання відстеження потрібно відкрити консоль у кореневій папці проекту і виконати команду:

```
gulp
```

Або альтернативно:

```
gulp startWatch
```

Це завдання виконує наступне:

1. Запускає локальний веб-сервер і відкриває проект у браузері
2. Стежить за html, scss, js файлами проекту
3. Транспілює scss --> css, при цьому:
   - Додає вендорні префікси
   - Групує та сортує @media, коректно розміщуючи їх наприкінці css-файлу
   - Видаляє коментарі
   - Застосовує правила кодстайлу до css

## 6.1. Режими роботи відстеження

Ключ **--dev** запустить відстеження з додаванням карти коду (sourcemaps):

```
gulp --dev
```

Ключ **--css** запустить відстеження тільки за css файлами, препроцесор не використовуйте:

```
gulp --css
```

## 6.2. Додаткові команди gulp

**Компіляція SCSS** (з автоформатуванням, звичайна та мініфікована версії):

```
gulp scss
```

**Тільки мініфікована версія CSS**:

```
gulp min
```

**Компіляція для розробки** (з sourcemaps, без мініфікації):

```
gulp dev
```

**Компіляція Pug шаблонів**:

```
gulp pugTask
```

**Створення структури проекту** (створює всі необхідні папки та файли):

```
gulp cs
```

## Для роботи gulp потрібна певна структура проекту:

<pre>
project/
├── assets/
│   ├── css/
│   │   └── style.css
│   ├── images/
│   ├── js/
│   │   └── main.js
│   └── vendors/
├── src/
│   ├── scss/
│   │   ├── abstracts/
│   │   │   ├── _index.scss
│   │   │   └── _extends.scss
│   │   │   ├── _mixins.scss
│   │   │   ├── _mixins-media.scss
│   │   │   ├── _skin.scss
│   │   │   ├── _variables.scss
│   │   ├── base/
│   │   │   ├── _index.scss
│   │   │   ├── _common.scss
│   │   │   └── _typography.scss
│   │   ├── components/
│   │   │   └── _index.scss
│   │   ├── layout/
│   │   │   ├── _index.scss
│   │   │   ├── _footer.scss
│   │   │   ├── _header.scss
│   │   │   └── _main.scss
│   │   └── style.scss
│   └── templates/
│       └── index.pug
├── index.html
└── gulpfile.js
</pre>

> При недотриманні вказаної структури **_gulp-завдання_** працювати не будуть.
> Ви можете самостійно змінити шляхи в **_gulpfile.js_**, але цей варіант не рекомендується і допомога надаватися не буде.

# 7. Зупинка завдання відстеження

Завдання відстеження **gulp** працює в пам'яті комп'ютера постійно, відстежуючи зміни у файлах і виконуючи відповідні завдання.

По закінченні роботи над проектом, просто закрити вікно терміналу або VSCode, якщо використовується його термінал - недостатньо, необхідно попередньо зупинити gulp завдання.

Для зупинки завдання в терміналі необхідно натиснути комбінацію клавіш **CTRL + C**, потім підтвердити зупинку завдання, натиснувши **Y**.
